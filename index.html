<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Volleyball Control Panel</title>
<style>
    body {
        font-family: 'Inter', sans-serif;
        background: #0f172a;
        color: #f8fafc;
        padding: 40px;
    }
    h1 { color:#3b82f6; margin-bottom:20px; }
    .panel { background:#1e293b; padding:20px; border-radius:12px; max-width:600px; }
    label { display:block; margin-top:10px; font-weight:600; }
    select, input {
        width:100%; padding:8px; margin-top:5px; border-radius:6px;
        border:none; background:#334155; color:#fff;
    }
    button {
        margin-top:15px; padding:10px 20px; border:none;
        border-radius:8px; background:#3b82f6; color:white;
        font-weight:600; cursor:pointer;
    }
    button:hover { background:#2563eb; }
    .sets { margin-top:10px; }
    .set-row { display:flex; gap:10px; margin-bottom:5px; }
    .set-row input { width:50%; }
    .score-display {
        font-size:1.5em; margin-top:10px; font-weight:bold; color:#fbbf24;
    }
    pre {
        background:#0f172a; color:#94a3b8; padding:10px;
        border-radius:6px; overflow:auto; max-height:200px;
    }
</style>
</head>
<body>
<h1>🏐 Volleyball Results Panel</h1>

<div class="panel">
    <label>Home Team</label>
    <select id="homeTeam">
        <option value="">-- choose --</option>
        <option>ΟΛΥΜΠΙΑΚΟΣ</option>
        <option>ΠΑΝΑΘΗΝΑΙΚΟΣ</option>
        <option>ΚΗΦΙΣΙΑ</option>
        <option>ΠΑΟΚ</option>
        <option>ΜΙΛΩΝ</option>
        <option>ΦΟΙΝΙΚΑΣ ΣΥΡΟΥ</option>
        <option>ΠΑΝΙΩΝΙΟΣ</option>
        <option>Ο.Φ.Η.</option>
        <option>ΚΑΛΑΜΑΤΑ</option>
        <option>ΦΛΟΙΣΒΟΣ Π.</option>
    </select>

    <label>Away Team</label>
    <select id="awayTeam">
        <option value="">-- choose --</option>
        <option>ΟΛΥΜΠΙΑΚΟΣ</option>
        <option>ΠΑΝΑΘΗΝΑΙΚΟΣ</option>
        <option>ΚΗΦΙΣΙΑ</option>
        <option>ΠΑΟΚ</option>
        <option>ΜΙΛΩΝ</option>
        <option>ΦΟΙΝΙΚΑΣ ΣΥΡΟΥ</option>
        <option>ΠΑΝΙΩΝΙΟΣ</option>
        <option>Ο.Φ.Η.</option>
        <option>ΚΑΛΑΜΑΤΑ</option>
        <option>ΦΛΟΙΣΒΟΣ Π.</option>
    </select>

    <div class="sets" id="setsContainer"></div>
    <button id="addSetBtn">+ Add Set</button>

    <div class="score-display" id="finalScore">Final: 0 – 0</div>

    <button id="saveBtn">💾 Generate JSON</button>
    <pre id="jsonOutput"></pre>
</div>

<script>
let sets = [];

document.getElementById('addSetBtn').addEventListener('click', () => {
    const index = sets.length;
    const row = document.createElement('div');
    row.className = 'set-row';
    row.innerHTML = `
        <input type="number" min="0" placeholder="Home pts" id="home${index}">
        <input type="number" min="0" placeholder="Away pts" id="away${index}">
    `;
    document.getElementById('setsContainer').appendChild(row);
    sets.push({home:0,away:0});
});

document.getElementById('setsContainer').addEventListener('input', () => {
    sets = Array.from(document.querySelectorAll('.set-row')).map((row,i) => ({
        home: parseInt(row.querySelector(`#home${i}`).value)||0,
        away: parseInt(row.querySelector(`#away${i}`).value)||0
    }));
    updateScore();
});

function updateScore(){
    let homeSets=0, awaySets=0;
    sets.forEach(s=>{
        if(s.home>0 || s.away>0){
            if(s.home>s.away) homeSets++; else if(s.away>s.home) awaySets++;
        }
    });
    document.getElementById('finalScore').textContent=`Final: ${homeSets} – ${awaySets}`;
}

document.getElementById('saveBtn').addEventListener('click', ()=>{
    const homeTeam=document.getElementById('homeTeam').value;
    const awayTeam=document.getElementById('awayTeam').value;
    if(!homeTeam||!awayTeam){alert('Please choose both teams.');return;}

    let homeSets=0, awaySets=0;
    const setObjs=sets.map((s)=>({homePoints:s.home,awayPoints:s.away}));
    setObjs.forEach(s=>{if(s.home>s.away)homeSets++;else if(s.away>s.home)awaySets++;});
    
    const resultObj={
        title:"ΝΕΑ ΑΓΩΝΙΣΤΙΚΗ",
        games:[{
            homeTeam,awayTeam,
            homeScore:homeSets,awayScore:awaySets,
            sets:setObjs
        }]
    };

    const jsonStr=JSON.stringify([resultObj],null,2);
    document.getElementById('jsonOutput').textContent=jsonStr;

    // Option 1: Download the JSON file manually
    const blob=new Blob([jsonStr],{type:'application/json'});
    const a=document.createElement('a');
    a.href=URL.createObjectURL(blob);
    a.download='volleyball-results.json';
    a.click();

    // Option 2 (advanced): upload via GitHub API — see below
});
</script>
</body>
</html>
